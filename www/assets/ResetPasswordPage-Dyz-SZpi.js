import{x as E,r as s,f as h,j as e,R as W,P as z,B as d,T as m,A as g,t as w,w as f,bn as p,au as b,l as I}from"./index-VtLmrSoN.js";const O=()=>{const P=E(),[n,j]=s.useState(""),[u,S]=s.useState(""),[o,y]=s.useState(!1),[i,v]=s.useState(!1),[l,a]=s.useState(""),[R,A]=s.useState(!1),[c,x]=s.useState(!1);s.useEffect(()=>{h.auth.onAuthStateChange(async t=>{t==="PASSWORD_RECOVERY"&&console.log("Password recovery event detected")})},[]);const C=async t=>{if(t.preventDefault(),a(""),n.length<6){a("Passwort muss mindestens 6 Zeichen lang sein");return}if(n!==u){a("Passwörter stimmen nicht überein");return}x(!0);try{const{error:r}=await h.auth.updateUser({password:n});if(r)throw r;A(!0),setTimeout(()=>{P("/")},3e3)}catch(r){a(r instanceof Error?r.message:"Ein Fehler ist aufgetreten")}finally{x(!1)}};return e.jsx(W,{maxWidth:"sm",sx:{py:8},children:e.jsxs(z,{elevation:2,sx:{p:4,borderRadius:3},children:[e.jsxs(d,{sx:{textAlign:"center",mb:4},children:[e.jsx(d,{component:"img",src:"/logo.png",alt:"HABDAWAS Logo",sx:{width:"auto",height:50,maxWidth:"250px",mx:"auto",display:"block",objectFit:"contain",mb:3}}),e.jsx(m,{variant:"h4",sx:{fontWeight:500,mb:1},children:"Neues Passwort setzen"}),e.jsx(m,{variant:"body2",color:"text.secondary",children:"Bitte geben Sie Ihr neues Passwort ein"})]}),R?e.jsx(g,{severity:"success",sx:{borderRadius:2},children:"Ihr Passwort wurde erfolgreich geändert! Sie werden weitergeleitet..."}):e.jsxs(e.Fragment,{children:[l&&e.jsx(g,{severity:"error",sx:{mb:3,borderRadius:2},children:l}),e.jsxs(d,{component:"form",onSubmit:C,children:[e.jsx(w,{fullWidth:!0,label:"Neues Passwort",type:o?"text":"password",value:n,onChange:t=>j(t.target.value),margin:"normal",required:!0,InputProps:{endAdornment:e.jsx(f,{onClick:()=>y(!o),edge:"end",size:"small",sx:{mr:.5},children:o?e.jsx(p,{size:20}):e.jsx(b,{size:20})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(w,{fullWidth:!0,label:"Passwort bestätigen",type:i?"text":"password",value:u,onChange:t=>S(t.target.value),margin:"normal",required:!0,InputProps:{endAdornment:e.jsx(f,{onClick:()=>v(!i),edge:"end",size:"small",sx:{mr:.5},children:i?e.jsx(p,{size:20}):e.jsx(b,{size:20})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(I,{type:"submit",fullWidth:!0,variant:"contained",disabled:c,sx:{mt:3,py:1.5,textTransform:"none",fontSize:"0.95rem",fontWeight:600,borderRadius:2,boxShadow:"none","&:hover":{boxShadow:1}},children:c?"Lädt...":"Passwort ändern"})]})]})]})})};export{O as ResetPasswordPage};
