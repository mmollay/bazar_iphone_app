import{r as i,f as m}from"./index-kFPCxDRP.js";const F=r=>r==null?"0":r.toLocaleString("de-DE"),E=r=>r==null?"0,00 â‚¬":r.toLocaleString("de-DE",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}),v=()=>{const[r,p]=i.useState(null),[y,a]=i.useState(!0),[f,w]=i.useState(null),o=async()=>{var s,n,_,c,g,l,u;try{a(!0);const{data:e,error:d}=await m.from("credit_system_settings").select("*").in("setting_key",["daily_free_listings","cost_per_listing","community_pot_balance","power_user_credit_price","min_donation_amount","power_user_min_purchase","low_pot_warning_threshold"]);if(d)throw d;if(e){const h={dailyFreeListings:parseFloat(((s=e.find(t=>t.setting_key==="daily_free_listings"))==null?void 0:s.setting_value)||"5"),costPerListing:parseFloat(((n=e.find(t=>t.setting_key==="cost_per_listing"))==null?void 0:n.setting_value)||"0.20"),communityPotBalance:parseInt(((_=e.find(t=>t.setting_key==="community_pot_balance"))==null?void 0:_.setting_value)||"0"),powerUserCreditPrice:parseFloat(((c=e.find(t=>t.setting_key==="power_user_credit_price"))==null?void 0:c.setting_value)||"0.20"),minDonationAmount:parseFloat(((g=e.find(t=>t.setting_key==="min_donation_amount"))==null?void 0:g.setting_value)||"5.00"),powerUserMinPurchase:parseFloat(((l=e.find(t=>t.setting_key==="power_user_min_purchase"))==null?void 0:l.setting_value)||"10.00"),lowPotWarningThreshold:parseInt(((u=e.find(t=>t.setting_key==="low_pot_warning_threshold"))==null?void 0:u.setting_value)||"100")};p(h)}}catch(e){w(e instanceof Error?e.message:"Failed to load settings"),console.error("Error loading system settings:",e)}finally{a(!1)}};return i.useEffect(()=>{o()},[]),{settings:r,loading:y,error:f,updateSetting:async s=>{try{const{error:n}=await m.from("credit_system_settings").update({setting_value:s.setting_value.toString(),updated_at:new Date().toISOString()}).eq("setting_key",s.setting_key);if(n)throw n;await o()}catch(n){throw n}},refresh:o}};export{E as a,F as f,v as u};
