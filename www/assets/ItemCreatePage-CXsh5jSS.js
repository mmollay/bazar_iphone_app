import{n as Te,r as t,f as x,j as e,T as a,B as n,K as N,_ as De,a3 as re,a2 as Ne,ac as oe,a4 as V,aa as Q,ad as Re,ag as Me,ah as Ke,L as W,t as ae,x as Bs,ai as Ds,h as Ns,i as Rs,R as Ms,A as Le,w as Ks,X as Ls,P as Fe,aj as Fs,l as X,H as ne,a5 as $e,I as $s,ak as qe}from"./index-BSUU9nrj.js";import{M as Ve,B as qs,D as Vs}from"./MultiImageUpload-DSLEym3C.js";import{A as le,a as ce,b as de}from"./AccordionSummary-DW1MYCBE.js";import{P as Ge}from"./phone-BE-Zw_sL.js";import{G as Gs}from"./gift-DVgAVAco.js";import{C as Oe}from"./calendar-DKNVDNuI.js";import{C as Os}from"./Collapse-CGVQO5hI.js";import{S as Y}from"./sparkles-DWbAhNz0.js";import{S as Ts}from"./save-C1v_47cF.js";import"./star-U3_x8Vk2.js";const Hs=()=>{const{user:g}=Te(),[m,b]=t.useState(!1),R=t.useCallback(async()=>{var I,w;if(!g)return{canCreate:!1,source:null,reason:"not_authenticated",message:"Bitte melde dich an, um Inserate zu erstellen."};try{b(!0);const{data:r,error:l}=await x.from("credit_system_settings").select("setting_key, setting_value").in("setting_key",["daily_free_listings","community_pot_balance"]);if(l)throw l;const _=parseInt(((I=r==null?void 0:r.find(c=>c.setting_key==="daily_free_listings"))==null?void 0:I.setting_value)||"5"),S=parseInt(((w=r==null?void 0:r.find(c=>c.setting_key==="community_pot_balance"))==null?void 0:w.setting_value)||"0"),{data:k,error:y}=await x.from("profiles").select("daily_listings_used, last_listing_date, personal_credits").eq("id",g.id).single();if(y)throw y;const P=parseInt(k.daily_listings_used)||0,M=k.last_listing_date,j=parseInt(k.personal_credits)||0,B=new Date().toISOString().split("T")[0],z=M!==B?0:P;return z<_&&S>0?{canCreate:!0,source:"community_pot",message:`Du kannst noch ${_-z} kostenlose Inserate heute erstellen.`,remainingDailyListings:_-z,communityPotBalance:S}:z<_&&S===0?j>0?{canCreate:!0,source:"personal_credits",message:`Community-Topf ist leer. Du verwendest deine persönlichen Credits (${j} verfügbar).`,personalCredits:j}:{canCreate:!1,source:null,reason:"community_pot_empty",message:"Der Community-Topf ist leer. Bitte spende oder kaufe persönliche Credits.",communityPotBalance:0}:z>=_?j>0?{canCreate:!0,source:"personal_credits",message:`Tageslimit erreicht. Du verwendest deine persönlichen Credits (${j} verfügbar).`,personalCredits:j}:{canCreate:!1,source:null,reason:"no_credits",message:"Tageslimit erreicht und keine persönlichen Credits verfügbar. Bitte spende oder kaufe Credits.",remainingDailyListings:0,personalCredits:0}:{canCreate:!1,source:null,reason:"unknown",message:"Fehler beim Überprüfen der Credits."}}catch(r){return console.error("Error checking credits:",r),{canCreate:!1,source:null,reason:"error",message:"Fehler beim Überprüfen der Credits."}}finally{b(!1)}},[g]),G=t.useCallback(async(I,w)=>{if(!g)return!1;try{if(I==="community_pot"){const{data:r}=await x.from("profiles").select("daily_listings_used, last_listing_date").eq("id",g.id).single(),l=new Date().toISOString().split("T")[0],S=(r==null?void 0:r.last_listing_date)!==l?0:parseInt(r==null?void 0:r.daily_listings_used)||0,{error:k}=await x.from("profiles").update({daily_listings_used:S+1,last_listing_date:l}).eq("id",g.id);if(k)throw k;const{error:y}=await x.rpc("update_community_pot_balance",{delta:-1});if(y)throw y;const{data:P}=await x.rpc("get_community_pot_balance");await x.from("community_pot_transactions").insert({transaction_type:"usage",user_id:g.id,amount:-1,balance_after:P||0,description:"Inserat erstellt (kostenlos)",item_id:w||null})}else if(I==="personal_credits"){const{data:r}=await x.from("profiles").select("personal_credits").eq("id",g.id).single(),l=parseInt(r==null?void 0:r.personal_credits)||0;if(l<=0)throw new Error("Keine persönlichen Credits verfügbar");const{error:_}=await x.from("profiles").update({personal_credits:l-1}).eq("id",g.id);if(_)throw _}return!0}catch(r){return console.error("Error consuming credit:",r),!1}},[g]);return{checkCredit:R,consumeCredit:G,loading:m}},Zs=({pickupAddress:g,shippingEnabled:m,shippingCostType:b,shippingCostFixed:R,shippingDescription:G,priceNegotiable:I,isFree:w,duration:r,onShippingEnabledChange:l,onShippingCostTypeChange:_,onShippingCostFixedChange:S,onShippingDescriptionChange:k,onPriceNegotiableChange:y,onIsFreeChange:P,onDurationChange:M,pickupEnabled:j,onPickupEnabledChange:B,phoneVisible:D=!1})=>{const z=()=>m?b==="free"?"Kostenlos":b==="fixed"?`€${R.toFixed(2)}`:"KI-berechnet":"Nicht verfügbar";return e.jsxs(le,{sx:{mt:3,border:"1px solid",borderColor:"divider",borderRadius:2,"&:before":{display:"none"},boxShadow:"none"},children:[e.jsxs(ce,{expandIcon:e.jsx(oe,{size:20}),sx:{"& .MuiAccordionSummary-content":{display:"flex",flexDirection:"column",gap:1.5}},children:[e.jsx(a,{variant:"subtitle2",sx:{fontWeight:600,mb:.5},children:"Artikel-Einstellungen"}),e.jsxs(n,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[j&&e.jsx(N,{icon:e.jsx(De,{size:14}),label:g?`Abholung: ${g}`:"Abholung möglich",size:"small",sx:{fontSize:"0.75rem"}}),j&&D&&e.jsx(N,{icon:e.jsx(Ge,{size:14}),label:"Tel. sichtbar",size:"small",color:"info",sx:{fontSize:"0.75rem"}}),e.jsx(N,{icon:e.jsx(re,{size:14}),label:`Versand: ${z()}`,size:"small",color:m?"primary":"default",sx:{fontSize:"0.75rem"}}),w&&e.jsx(N,{icon:e.jsx(Gs,{size:14}),label:"Zu verschenken",size:"small",color:"success",sx:{fontSize:"0.75rem"}}),!w&&I&&e.jsx(N,{icon:e.jsx(Ne,{size:14}),label:"VB",size:"small",sx:{fontSize:"0.75rem",fontWeight:700,bgcolor:"warning.main",color:"white"}}),e.jsx(N,{icon:e.jsx(Oe,{size:14}),label:`${r} Tage`,size:"small",sx:{fontSize:"0.75rem"}})]})]}),e.jsx(de,{sx:{pt:2,borderTop:"1px solid",borderColor:"divider"},children:e.jsxs(n,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsxs(n,{children:[e.jsxs(a,{variant:"subtitle2",sx:{fontWeight:600,mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(De,{size:16}),"Abholung"]}),e.jsx(V,{control:e.jsx(Q,{checked:j,onChange:c=>B(c.target.checked),size:"small"}),label:"Abholung aktivieren"}),j&&e.jsxs(n,{sx:{mt:1,ml:4},children:[e.jsxs(a,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:["📍 ",g||"Keine Adresse ausgewählt"]}),D&&e.jsxs(a,{variant:"caption",color:"info.main",sx:{display:"flex",alignItems:"center",gap:.5,mt:.5},children:[e.jsx(Ge,{size:12})," Telefonnummer wird im Inserat angezeigt"]}),!D&&g&&e.jsx(a,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:"🔒 Telefonnummer wird nicht angezeigt"})]})]}),e.jsxs(n,{children:[e.jsxs(a,{variant:"subtitle2",sx:{fontWeight:600,mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(re,{size:16}),"Versand"]}),e.jsx(V,{control:e.jsx(Q,{checked:m,onChange:c=>l(c.target.checked),size:"small"}),label:"Versand aktivieren",sx:{mb:2}}),m&&e.jsxs(n,{sx:{ml:4,display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(Re,{fullWidth:!0,size:"small",children:[e.jsx(Me,{children:"Versandkosten"}),e.jsxs(Ke,{value:b,label:"Versandkosten",onChange:c=>_(c.target.value),children:[e.jsx(W,{value:"ai_calculated",children:"KI-berechnet"}),e.jsx(W,{value:"fixed",children:"Festpreis"}),e.jsx(W,{value:"free",children:"Kostenlos"})]})]}),(b==="fixed"||b==="ai_calculated")&&e.jsx(ae,{fullWidth:!0,size:"small",type:"number",label:b==="ai_calculated"?"Versandkosten (€) - Manuell festlegen":"Versandkosten (€)",value:R,onChange:c=>S(Number(c.target.value)),inputProps:{min:0,step:.5},helperText:b==="ai_calculated"?"Im manuellen Modus wird keine KI-Berechnung durchgeführt":void 0}),k&&e.jsx(ae,{fullWidth:!0,size:"small",multiline:!0,rows:2,label:"Versandinformationen (optional)",value:G||"",onChange:c=>k(c.target.value),placeholder:"z.B. Versand mit DHL, 1-3 Werktage"})]})]}),e.jsxs(n,{children:[e.jsxs(a,{variant:"subtitle2",sx:{fontWeight:600,mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ne,{size:16}),"Preis"]}),e.jsxs(n,{sx:{display:"flex",flexDirection:"column",gap:1.5},children:[e.jsx(V,{control:e.jsx(Q,{checked:w,onChange:c=>{P(c.target.checked),c.target.checked&&y(!1)},size:"small"}),label:e.jsxs(n,{children:[e.jsx(a,{variant:"body2",children:"Zu verschenken"}),e.jsx(a,{variant:"caption",color:"text.secondary",children:"Artikel kostenlos abgeben"})]})}),!w&&e.jsx(V,{control:e.jsx(Q,{checked:I,onChange:c=>y(c.target.checked),size:"small"}),label:e.jsxs(n,{children:[e.jsx(a,{variant:"body2",children:"Verhandlungsbasis (VB)"}),e.jsx(a,{variant:"caption",color:"text.secondary",children:"Preis ist verhandelbar"})]})})]})]}),e.jsxs(n,{children:[e.jsxs(a,{variant:"subtitle2",sx:{fontWeight:600,mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(Oe,{size:16}),"Laufzeit"]}),e.jsxs(Re,{fullWidth:!0,size:"small",children:[e.jsx(Me,{children:"Anzeigedauer"}),e.jsxs(Ke,{value:r,label:"Anzeigedauer",onChange:c=>M(Number(c.target.value)),children:[e.jsx(W,{value:7,children:"7 Tage"}),e.jsx(W,{value:14,children:"14 Tage"}),e.jsx(W,{value:30,children:"30 Tage"}),e.jsx(W,{value:60,children:"60 Tage"}),e.jsx(W,{value:90,children:"90 Tage"})]})]}),e.jsx(a,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:1},children:"Das Inserat wird nach Ablauf automatisch deaktiviert"})]})]})})]})},lt=()=>{const g=Bs(),{user:m}=Te(),{balance:b,refetch:R}=Ds(),{checkCredit:G,consumeCredit:I}=Hs(),w=Ns(),r=Rs(w.breakpoints.down("sm")),[l,_]=t.useState([]),[S,k]=t.useState("upload"),[y,P]=t.useState(!1),[M,j]=t.useState(""),[B,D]=t.useState(!1),[z,c]=t.useState(!1),[he,He]=t.useState(!1),[U,ue]=t.useState(30),[K,ge]=t.useState(!1),[ee,pe]=t.useState(!1),[Ze,Je]=t.useState(null),[me,L]=t.useState(""),[T,Qe]=t.useState([]),[O,Xe]=t.useState(""),[F,Ye]=t.useState(null),[fe,xe]=t.useState(!1),[Ue,es]=t.useState(!1),[se,be]=t.useState(""),[te,_e]=t.useState(""),[ie,ye]=t.useState(""),[ss,ts]=t.useState(""),[is,ns]=t.useState(""),[rs,os]=t.useState(""),[as,ls]=t.useState([]),[cs,ds]=t.useState(""),[hs,us]=t.useState(""),[gs,ps]=t.useState(""),[ms,fs]=t.useState(""),[xs,bs]=t.useState(""),[_s,ys]=t.useState(""),[js,Cs]=t.useState([]),[Ss,ks]=t.useState(""),[ws,zs]=t.useState(""),[je,Ce]=t.useState(!1),[Se,ke]=t.useState("free"),[we,ze]=t.useState(0),[ve,Ie]=t.useState(""),[Ee,Pe]=t.useState(!1),[vs,Is]=t.useState(!1),[Js,Es]=t.useState("");t.useEffect(()=>{if(!m){g("/");return}(async()=>{try{const[f,o,v]=await Promise.all([x.from("addresses").select("*").eq("user_id",m.id).order("is_default_shipping",{ascending:!1}),x.from("profiles").select("shipping_enabled, shipping_cost, shipping_cost_type, shipping_description, pickup_enabled, show_location_publicly, location_description, ai_analyze_all_images").eq("id",m.id).maybeSingle(),x.from("items").select("id",{count:"exact",head:!0}).eq("user_id",m.id)]);if(f.data){Qe(f.data);const d=f.data.filter(p=>p.address_type==="pickup_only"||p.address_type==="both"),A=d.find(p=>p.is_default_shipping)||d[0];A&&Xe(A.id)}o.data&&(Ye(o.data),o.data.shipping_enabled&&Ce(o.data.shipping_enabled),o.data.shipping_cost_type&&ke(o.data.shipping_cost_type),o.data.shipping_cost&&ze(o.data.shipping_cost),o.data.shipping_description&&Ie(o.data.shipping_description),o.data.pickup_enabled&&Pe(o.data.pickup_enabled),o.data.show_location_publicly!==void 0&&Is(o.data.show_location_publicly),o.data.location_description&&Es(o.data.location_description));const h=(v.count||0)===0;es(h),xe(h)}catch(f){console.error("Error loading data:",f)}})()},[m,g]),t.useEffect(()=>{l.length>0&&S==="upload"&&k("choose")},[l,S]);const Ps=async(i,f,o)=>{const{data:{session:v}}=await x.auth.getSession(),C=v==null?void 0:v.access_token;if(!C)throw new Error("Keine Authentifizierung vorhanden");const d={Deutschland:"DE",Österreich:"AT",Schweiz:"CH",Frankreich:"FR",Italien:"IT",Spanien:"ES",Niederlande:"NL",Belgien:"BE",Polen:"PL",Tschechien:"CZ"}[f]||"DE",A=await fetch("https://hsbjflixgavjqxvnkivi.supabase.co/functions/v1/analyze-image",{method:"POST",headers:{Authorization:`Bearer ${C}`,"Content-Type":"application/json"},body:JSON.stringify({imageData:i,shippingCountry:d,additionalNotes:o})}),p=await A.json();if(!A.ok)throw p.insufficientTokens?new Error(`Nicht genügend Tokens. Du hast ${p.currentBalance} Tokens, benötigt wird ${p.required}.`):new Error(p.error||"Analyse fehlgeschlagen");return p},Ae=async()=>{if(!(l.length===0||!m)){ge(!0),L("");try{console.log("Starting AI analysis...");const i=T.find(d=>d.id===O),f=(i==null?void 0:i.country)||qe(),v=(F==null?void 0:F.ai_analyze_all_images)??!1?l:[l.find(d=>d.isPrimary)||l[0]];console.log("Analyzing images:",v.length);const C=await Promise.all(v.map(d=>Ps(d.preview,f,M)));console.log("Analysis complete:",C);const h=C[0];C.length>1&&C.slice(1).forEach(d=>{d.features&&(h.features=[...h.features||[],...d.features]),d.colors&&(h.colors=[...new Set([...h.colors||[],...d.colors])]),d.accessories&&(h.accessories=[...h.accessories||[],...d.accessories]),d.tags&&(h.tags=[...new Set([...h.tags||[],...d.tags])])}),Je(h),be(h.title),_e(h.description),ye(h.price.toString()),await R(),console.log("Publishing item with data:",h),await We(h),console.log("Item published successfully")}catch(i){console.error("Error in handleAIGenerate:",i),L(i instanceof Error?i.message:"Analyse fehlgeschlagen")}finally{ge(!1)}}},We=async i=>{var h,d,A;if(!m)return;const f=(i==null?void 0:i.title)||se,o=(i==null?void 0:i.description)||te,v=(i==null?void 0:i.price)||parseFloat(ie);if(!f||!o||!v)return;if(!m.email_confirmed_at){L("Bitte bestätigen Sie zuerst Ihre E-Mail-Adresse.");return}console.log("[Credit Check] Checking credits before listing creation...");const C=await G();if(console.log("[Credit Check] Result:",C),!C.canCreate){L(C.message||"Du kannst derzeit kein Inserat erstellen. Bitte spende oder kaufe Credits.");return}pe(!0),L("");try{const p=[];for(const E of l){const H=E.file.name.split(".").pop(),Z=`${m.id}/${Date.now()}-${E.id}.${H}`,{error:q}=await x.storage.from("item-images").upload(Z,E.file);if(q)throw q;const{data:{publicUrl:J}}=x.storage.from("item-images").getPublicUrl(Z);p.push(J)}const u=T.find(E=>E.id===O),As={Deutschland:"DE",Österreich:"AT",Schweiz:"CH",Frankreich:"FR",Italien:"IT",Spanien:"ES",Niederlande:"NL",Belgien:"BE",Polen:"PL",Tschechien:"CZ"}[(u==null?void 0:u.country)||qe()]||"DE",Ws=p[l.findIndex(E=>E.isPrimary)]||p[0],s=i||Ze,{data:$,error:Be}=await x.from("items").insert({user_id:m.id,title:f,description:o,price:v,image_url:Ws,status:y?"published":"draft",ai_generated:s!==null,category:s==null?void 0:s.category,subcategory:s==null?void 0:s.subcategory,condition:s==null?void 0:s.condition,brand:s==null?void 0:s.brand,size:s==null?void 0:s.size,weight:s==null?void 0:s.weight,dimensions_length:(h=s==null?void 0:s.dimensions)==null?void 0:h.length,dimensions_width:(d=s==null?void 0:s.dimensions)==null?void 0:d.width,dimensions_height:(A=s==null?void 0:s.dimensions)==null?void 0:A.height,material:s==null?void 0:s.material,colors:s==null?void 0:s.colors,style:s==null?void 0:s.style,serial_number:s==null?void 0:s.serialNumber,features:s==null?void 0:s.features,accessories:s==null?void 0:s.accessories,tags:s==null?void 0:s.tags,postal_code:u==null?void 0:u.postal_code,location:u==null?void 0:u.city,estimated_weight_kg:s==null?void 0:s.estimated_weight_kg,package_dimensions:s==null?void 0:s.package_dimensions,ai_shipping_domestic:s==null?void 0:s.ai_shipping_domestic,ai_shipping_international:s==null?void 0:s.ai_shipping_international,selected_address_id:O||null,shipping_from_country:As,snapshot_shipping_enabled:je,snapshot_shipping_cost:we,snapshot_shipping_cost_type:Se,snapshot_shipping_description:ve||null,snapshot_pickup_enabled:Ee,snapshot_show_location_publicly:vs,price_negotiable:B,is_free:z,price_on_request:he,duration_days:U,snapshot_pickup_address:u==null?void 0:u.address,snapshot_pickup_postal_code:u==null?void 0:u.postal_code,snapshot_pickup_city:u==null?void 0:u.city,snapshot_pickup_country:u==null?void 0:u.country,snapshot_location_description:(F==null?void 0:F.location_description)||null}).select().single();if(Be)throw Be;if(console.log("Item created:",$),p.length>0&&$){const E=p.map((Z,q)=>{var J;return{item_id:$.id,image_url:Z,display_order:q,is_primary:((J=l[q])==null?void 0:J.isPrimary)||q===0}});console.log("Inserting item images:",E.length);const{error:H}=await x.from("item_images").insert(E);if(H)throw H;console.log("Images inserted successfully")}console.log("[Credit Check] Consuming credit..."),await I(C.source,$.id)?console.log("[Credit Check] Credit consumed successfully"):console.error("[Credit Check] Failed to consume credit"),console.log("Navigating to:",`/item/${$.id}`),g(`/item/${$.id}`)}catch(p){L(p instanceof Error?p.message:"Upload fehlgeschlagen")}finally{pe(!1)}};return e.jsxs(Ms,{maxWidth:"md",sx:{py:4,pb:12},children:[e.jsxs(n,{sx:{mb:5,textAlign:"center"},children:[e.jsx(a,{variant:"h4",sx:{fontWeight:700,color:"primary.main",fontSize:{xs:"1.75rem",md:"2.25rem"},letterSpacing:"-0.02em",mb:1},children:"Artikel erstellen"}),e.jsx(a,{variant:"body2",sx:{color:"text.secondary",fontSize:"0.95rem",maxWidth:"500px",mx:"auto"},children:"Lade deine Bilder hoch und lass die KI die Arbeit machen"})]}),me&&e.jsx(Le,{severity:"error",sx:{mb:3},children:me}),fe&&Ue&&e.jsx(Os,{in:fe,children:e.jsx(Le,{severity:"info",icon:e.jsx(Y,{size:20}),action:e.jsx(Ks,{size:"small",onClick:()=>xe(!1),sx:{color:"inherit"},children:e.jsx(Ls,{size:18})}),sx:{mb:3,backgroundColor:"rgba(16, 185, 129, 0.08)",borderColor:"#10b981",border:"1px solid","& .MuiAlert-icon":{color:"#10b981"}},children:e.jsxs(n,{children:[e.jsx(a,{variant:"subtitle2",sx:{fontWeight:600,mb:.5,color:"#047857"},children:"💡 Willkommen! Ihr erster Artikel"}),e.jsx(a,{variant:"body2",sx:{color:"text.secondary",mb:1},children:"Laden Sie einfach Fotos hoch - unser KI-Assistent analysiert die Bilder automatisch und schlägt Titel, Beschreibung, Preis und weitere Details vor."}),e.jsxs(a,{variant:"caption",sx:{color:"text.secondary",display:"block"},children:["Sie können die KI-Einstellungen jederzeit unter ",e.jsx("strong",{children:"Profil → Einstellungen → KI-Assistent"})," anpassen."]})]})})}),l.length===0?e.jsx(Ve,{images:l,onImagesChange:_}):e.jsxs(Fe,{sx:{p:{xs:2,md:3},borderRadius:3,mb:3},children:[e.jsx(Ve,{images:l,onImagesChange:_}),l.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(n,{sx:{mt:3,p:2.5,border:"2px solid",borderColor:"primary.main",borderRadius:2,bgcolor:"rgba(25, 118, 210, 0.02)"},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1.5},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Y,{size:18,style:{color:"#1976d2"}}),e.jsx(a,{variant:"subtitle2",sx:{fontWeight:600,color:"primary.main"},children:"KI-Unterstützung"})]}),e.jsx(N,{icon:e.jsx(Fs,{size:16}),label:`${b} Tokens`,size:"small",color:b>0?"primary":"error",sx:{fontWeight:600}})]}),e.jsx(ae,{fullWidth:!0,multiline:!0,rows:3,label:"Zusätzliche Informationen für die KI (optional)",placeholder:"z.B. Erbstück, Notverkauf, versteckte Mängel, besondere Merkmale, die auf dem Bild nicht sichtbar sind...",value:M,onChange:i=>j(i.target.value),helperText:"Diese Informationen helfen der KI, eine bessere Beschreibung und einen realistischeren Preis zu erstellen",sx:{"& .MuiOutlinedInput-root":{backgroundColor:"white"}}})]}),e.jsx(Zs,{pickupAddress:(()=>{const i=T.find(o=>o.id===O);return i?[i.address,i.postal_code,i.city].filter(Boolean).join(", "):""})(),shippingEnabled:je,shippingCostType:Se,shippingCostFixed:we,shippingDescription:ve,priceNegotiable:B,isFree:z,duration:U,onShippingEnabledChange:Ce,onShippingCostTypeChange:ke,onShippingCostFixedChange:ze,onShippingDescriptionChange:Ie,onPriceNegotiableChange:D,onIsFreeChange:c,onDurationChange:ue,pickupEnabled:Ee,onPickupEnabledChange:Pe,phoneVisible:(()=>{const i=T.find(f=>f.id===O);return(i==null?void 0:i.show_phone_publicly)||!1})()})]}),S==="choose"&&l.length>0&&e.jsxs(n,{sx:{mt:4},children:[e.jsxs(n,{sx:{display:"flex",gap:2,flexDirection:{xs:"column",sm:"row"}},children:[e.jsx(X,{fullWidth:!0,variant:"outlined",size:"large",onClick:()=>k("manual"),sx:{py:1.5,textTransform:"none",fontSize:"0.95rem",fontWeight:500,borderRadius:2},children:"Manuell weitermachen"}),e.jsx(X,{fullWidth:!0,variant:"contained",size:"large",onClick:Ae,disabled:K||b<1,startIcon:K?e.jsx(ne,{size:18,color:"inherit"}):e.jsx(Y,{size:18}),sx:{py:1.5,textTransform:"none",fontSize:"0.95rem",fontWeight:600,borderRadius:2,boxShadow:2},children:K?"Generiere mit KI...":b<2500?"Nicht genügend Tokens":"Mit KI erzeugen (~2.500 Tokens)"})]}),e.jsx(n,{sx:{mt:2,p:1.5,bgcolor:"rgba(25, 118, 210, 0.04)",borderRadius:1,border:"1px solid",borderColor:"rgba(25, 118, 210, 0.2)"},children:e.jsx(V,{control:e.jsx($e,{checked:y,onChange:i=>P(i.target.checked),size:"small"}),label:e.jsxs(n,{children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500},children:"Gleich veröffentlichen"}),e.jsx(a,{variant:"caption",color:"text.secondary",children:"Nach KI-Generierung direkt veröffentlichen"})]}),sx:{m:0}})})]})]}),S==="manual"&&e.jsxs(Fe,{sx:{borderRadius:3,overflow:"hidden"},children:[e.jsxs(n,{sx:{p:3},children:[e.jsx(a,{variant:"h6",fontWeight:600,gutterBottom:!0,sx:{mb:3},children:"Artikelinformationen"}),e.jsxs(n,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsxs(le,{defaultExpanded:!0,elevation:0,sx:{border:"1px solid",borderColor:"divider","&:before":{display:"none"}},children:[e.jsx(ce,{expandIcon:e.jsx(oe,{size:20}),sx:{bgcolor:"rgba(25, 118, 210, 0.04)","&:hover":{bgcolor:"rgba(25, 118, 210, 0.08)"}},children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx($s,{size:20,color:"#1976d2"}),e.jsx(a,{fontWeight:600,children:"Grundinformationen"})]})}),e.jsx(de,{sx:{p:3},children:e.jsx(qs,{title:se,description:te,price:ie,category:ss,brand:is,condition:rs,tags:as,priceNegotiable:B,isFree:z,priceOnRequest:he,duration:U,onTitleChange:be,onDescriptionChange:_e,onPriceChange:ye,onCategoryChange:ts,onBrandChange:ns,onConditionChange:os,onTagsChange:ls,onPriceNegotiableChange:D,onIsFreeChange:c,onPriceOnRequestChange:He,onDurationChange:ue,isMobile:r,hideExtendedSettings:!0})})]}),e.jsxs(le,{elevation:0,sx:{border:"1px solid",borderColor:"divider","&:before":{display:"none"}},children:[e.jsx(ce,{expandIcon:e.jsx(oe,{size:20}),sx:{bgcolor:"rgba(156, 39, 176, 0.04)","&:hover":{bgcolor:"rgba(156, 39, 176, 0.08)"}},children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(re,{size:20,color:"#9c27b0"}),e.jsx(a,{fontWeight:600,children:"Details (Optional)"})]})}),e.jsx(de,{sx:{p:3},children:e.jsx(Vs,{size:cs,weight:hs,dimensionsLength:gs,dimensionsWidth:ms,dimensionsHeight:xs,material:_s,colors:js,style:Ss,serialNumber:ws,onSizeChange:ds,onWeightChange:us,onDimensionsChange:(i,f,o)=>{ps(i),fs(f),bs(o)},onMaterialChange:ys,onColorsChange:Cs,onStyleChange:ks,onSerialNumberChange:zs,isMobile:r})})]})]})]}),e.jsxs(n,{sx:{p:3,pt:0},children:[e.jsx(n,{sx:{mb:2,p:1.5,bgcolor:"rgba(25, 118, 210, 0.04)",borderRadius:1,border:"1px solid",borderColor:"rgba(25, 118, 210, 0.2)"},children:e.jsx(V,{control:e.jsx($e,{checked:y,onChange:i=>P(i.target.checked),size:"small"}),label:e.jsxs(n,{children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500},children:"Gleich veröffentlichen"}),e.jsx(a,{variant:"caption",color:"text.secondary",children:"Inserat direkt online stellen (sonst als Entwurf speichern)"})]}),sx:{m:0}})}),e.jsxs(n,{sx:{display:"flex",gap:2,flexDirection:{xs:"column",sm:"row"}},children:[e.jsx(X,{fullWidth:!0,variant:"outlined",size:"large",onClick:Ae,disabled:K,startIcon:K?e.jsx(ne,{size:18,color:"inherit"}):e.jsx(Y,{size:18}),sx:{py:1.5,textTransform:"none",fontSize:"0.95rem",fontWeight:500,borderRadius:2},children:K?"Generiere mit KI...":"Mit KI erzeugen"}),e.jsx(X,{fullWidth:!0,variant:"contained",size:"large",onClick:()=>We(),disabled:ee||!se||!te||!ie,startIcon:ee?e.jsx(ne,{size:18,color:"inherit"}):e.jsx(Ts,{size:18}),sx:{py:1.5,textTransform:"none",fontSize:"0.95rem",fontWeight:600,borderRadius:2},children:ee?"Speichere...":y?"Veröffentlichen":"Als Entwurf speichern"})]})]})]})]})};export{lt as ItemCreatePage};
